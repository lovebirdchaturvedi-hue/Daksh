<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Buyer RFQs | APD Global Trade</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
/* ================= BASE ================= */
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:#f5f7fb;
  color:#0f172a;
}
h1,h2,h3{letter-spacing:-.3px}

/* ================= HEADER ================= */
.header{
  height:72px;
  background:#071427;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 22px;
}
.logo{color:#c9a44a;font-weight:600}
.nav-desktop a{
  color:#e5e7eb;
  margin-left:18px;
  text-decoration:none;
  font-size:14px;
}
.hamburger{
  display:none;
  flex-direction:column;
  cursor:pointer;
}
.hamburger span{
  width:24px;
  height:2px;
  background:#fff;
  margin:4px 0;
}

/* ================= MOBILE NAV ================= */
.mobile-nav{
  position:fixed;
  top:0;right:-100%;
  width:75%;
  height:100%;
  background:#020617;
  padding:90px 30px;
  transition:.4s ease;
  z-index:9999;
}
.mobile-nav a{
  display:block;
  color:#fff;
  text-decoration:none;
  font-size:18px;
  margin-bottom:24px;
}

/* ================= CONTENT ================= */
.section{
  max-width:1200px;
  margin:auto;
  padding:80px 20px;
}
.section p{
  max-width:720px;
  color:#475569;
}
.rfq-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:26px;
  margin-top:40px;
}
.rfq-card{
  background:#fff;
  padding:24px;
  border-radius:16px;
  border:1px solid #e5e7eb;
  opacity:0;
  transform:translateY(30px);
  transition:.4s ease;
}
.rfq-card.visible{
  opacity:1;
  transform:translateY(0);
}
.rfq-card:hover{
  transform:translateY(-6px);
  box-shadow:0 20px 40px rgba(0,0,0,.08);
}
.badge{
  display:inline-block;
  background:#c9a44a;
  color:#000;
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  font-weight:600;
  margin-bottom:10px;
}
.buyer-contact{display:none;font-size:14px;margin-top:12px}
.buyer-locked{color:#991b1b;font-size:13px;font-weight:600;margin-top:12px}
.buyer-locked a{color:#991b1b}

/* ================= FOOTER ================= */
footer{
  background:#020617;
  color:#9ca3af;
  text-align:center;
  padding:50px 20px;
  font-size:14px;
}

/* ================= RESPONSIVE ================= */
@media(max-width:768px){
  .nav-desktop{display:none}
  .hamburger{display:flex}
}
</style>
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="header">
  <div class="logo">APD Global Trade</div>

  <nav class="nav-desktop">
    <a href="/index.html">Home</a>
    <a href="/rfq.html">Buyer RFQs</a>
    <a href="/membership.html">Membership</a>
  </nav>

  <div class="hamburger" id="hamburger">
    <span></span><span></span><span></span>
  </div>
</header>

<!-- ================= MOBILE NAV ================= -->
<div class="mobile-nav" id="mobileNav">
  <a href="/index.html">Home</a>
  <a href="/rfq.html">Buyer RFQs</a>
  <a href="/membership.html">Membership</a>
</div>

<!-- ================= PRIORITY RFQs ================= -->
<section class="section">
  <h1>Priority Buyer RFQs</h1>
  <p>High-demand verified buyer requirements.</p>
  <div class="rfq-grid" id="priorityRFQs"></div>
</section>

<!-- ================= MOCK RFQs ================= -->
<section class="section">
  <h1>Other Live Buyer RFQs</h1>
  <p>Ongoing global buyer requirements.</p>
  <div class="rfq-grid" id="mockRFQs"></div>
</section>

<footer>
  <p style="color:#c9a44a;font-weight:600;">APD Global Trade</p>
  <p>Elite B2B Trade Facilitation Platform</p>
</footer>

<!-- ================= MOBILE NAV SCRIPT ================= -->
<script>
const hamburger=document.getElementById("hamburger");
const mobileNav=document.getElementById("mobileNav");

hamburger.onclick=()=>{
  mobileNav.style.right =
    mobileNav.style.right==="0px" ? "-100%" : "0px";
};
</script>

<!-- ================= PRIORITY RFQs DATA ================= -->
<script>
const priorityRFQs=[
`SAUDI ARABIA / IR-64 / 26 MT / WHITE RICE / CIF JEDDAH PORT`,
`SAUDI ARABIA / SWARNA / 26 MT / WHITE RICE / CIF JEDDAH PORT`,
`NETHERLAND / REFINED SUNFLOWER OIL / 200 MT / CIF ROTTERDAM`,
`SOUTH AFRICA / REFINED CANOLA OIL / 25 MT / CIF DURBAN`,
`ALGERIA / PEANUT KERNEL / 20 MT / CIF ALGIERS`
];

const priorityGrid=document.getElementById("priorityRFQs");

priorityRFQs.forEach((rfq,i)=>{
  const card=document.createElement("div");
  card.className="rfq-card";
  card.innerHTML=`
    <span class="badge">PRIORITY RFQ</span>
    <h3>Buyer RFQ #${i+1}</h3>
    <p>${rfq}</p>
    <div class="buyer-contact">ðŸ“§ buyer@company.com</div>
    <div class="buyer-locked">
      ðŸ”’ Buyer contact available to Gold & Platinum suppliers only<br>
      <a href="/membership.html">Upgrade Membership</a>
    </div>`;
  priorityGrid.appendChild(card);
});
</script>

<!-- ================= MOCK RFQs SCRIPT ================= -->
<script>
const products=["Basmati Rice","IR-64 Rice","Sugar ICUMSA 45","Sunflower Oil","Soybean Oil"];
const destinations=["UAE","USA","UK","Germany","France"];

const mockGrid=document.getElementById("mockRFQs");

for(let i=1;i<=100;i++){
  const card=document.createElement("div");
  card.className="rfq-card";
  card.innerHTML=`
    <h3>${products[Math.floor(Math.random()*products.length)]}</h3>
    <p>Quantity: ${Math.floor(Math.random()*900+50)} MT</p>
    <p>Destination: ${destinations[Math.floor(Math.random()*destinations.length)]}</p>
    <div class="buyer-contact">ðŸ“§ buyer${i}@company.com</div>
    <div class="buyer-locked">
      ðŸ”’ Buyer contact available to Gold & Platinum suppliers only<br>
      <a href="/membership.html">Upgrade Membership</a>
    </div>`;
  mockGrid.appendChild(card);
}
</script>

<!-- ================= PREMIUM SCROLL ANIMATION ================= -->
<script>
const observer=new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      e.target.classList.add("visible");
      observer.unobserve(e.target);
    }
  });
},{threshold:.15});

document.querySelectorAll(".rfq-card")
  .forEach(card=>observer.observe(card));
</script>

<!-- ================= FIREBASE ACCESS (UNCHANGED) ================= -->
<script type="module">
import { auth, db } from "/assets/js/firebase-init.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, async (user)=>{
  if(!user) return;
  const snap=await getDoc(doc(db,"suppliers",user.uid));
  if(!snap.exists()) return;
  const s=snap.data();
  if(s.status==="approved" && (s.plan==="gold"||s.plan==="platinum")){
    document.querySelectorAll(".buyer-locked").forEach(e=>e.style.display="none");
    document.querySelectorAll(".buyer-contact").forEach(e=>e.style.display="block");
  }
});
</script>

</body>
</html>
