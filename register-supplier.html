<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Supplier Registration | APD Global Trade</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:#f5f7fb;
}

.form{
  max-width:520px;
  margin:80px auto;
  background:#fff;
  padding:40px;
  border-radius:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.1);
}

h1{text-align:center;margin-bottom:20px}

input{
  width:100%;
  padding:14px;
  margin-bottom:14px;
  border-radius:10px;
  border:1px solid #e5e7eb;
}

button{
  width:100%;
  padding:14px;
  background:#0b1d36;
  color:#fff;
  border:none;
  border-radius:999px;
  font-weight:600;
  cursor:pointer;
}

#error{color:#dc2626;text-align:center;margin-top:10px}
#success{color:#16a34a;text-align:center;margin-top:10px}
</style>
</head>

<body>

<div class="form">
  <h1>Supplier Registration</h1>

  <input id="company" placeholder="Company Name">
  <input id="contact" placeholder="Contact Number">
  <input id="product" placeholder="Which Product?">
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">

  <!-- IMPORTANT: type="button" -->
  <button type="button" id="submitBtn">Submit Application</button>

  <div id="error"></div>
  <div id="success"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signOut } from
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, setDoc, serverTimestamp } from
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ðŸ”¥ Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyABA-KRY6bY7K2QZwLhQ2piHjQVLLceiGs",
  authDomain: "apd-globaltrade-prod.firebaseapp.com",
  projectId: "apd-globaltrade-prod"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const companyEl = document.getElementById("company");
const contactEl = document.getElementById("contact");
const productEl = document.getElementById("product");
const emailEl = document.getElementById("email");
const passwordEl = document.getElementById("password");
const errorEl = document.getElementById("error");
const successEl = document.getElementById("success");

document.getElementById("submitBtn").addEventListener("click", async () => {
  errorEl.textContent = "";
  successEl.textContent = "";

  const company = companyEl.value.trim();
  const contact = contactEl.value.trim();
  const product = productEl.value.trim();
  const email = emailEl.value.trim();
  const password = passwordEl.value;

  if(!company || !contact || !product || !email || !password){
    errorEl.textContent = "Please fill all fields";
    return;
  }

  try{
    const cred = await createUserWithEmailAndPassword(auth,email,password);
    const user = cred.user;

    await setDoc(doc(db,"suppliers",user.uid),{
      companyName: company,
      contact: contact,
      product: product,
      email: email,
      status: "pending",
      plan: "basic",
      createdAt: serverTimestamp()
    });

    await signOut(auth);

    successEl.textContent = "Application submitted. Await admin approval.";

    setTimeout(()=>{
      location.href="/supplier-login.html";
    },1500);

  }catch(err){
    errorEl.textContent = err.message;
  }
});
</script>

<!-- ================= FOOTER ================= -->
<footer style="
  background:#020617;
  color:#9ca3af;
  text-align:center;
  padding:40px 20px;
  font-size:14px;
">
  <p style="color:#c9a44a;font-weight:600;margin-bottom:6px;">
    APD Global Trade
  </p>
  <p>Elite B2B Trade Facilitation Platform</p>

  <p style="margin:10px 0;">
    <a href="/terms.html" style="color:#c9a44a;text-decoration:none;">Terms</a> |
    <a href="/privacy.html" style="color:#c9a44a;text-decoration:none;">Privacy</a> |
    <a href="/disclaimer.html" style="color:#c9a44a;text-decoration:none;">Disclaimer</a>
  </p>

  <p style="margin:10px 0;line-height:1.6;">
    ðŸ“§ info@apdglobaltradehub.com <br>
    â˜Ž +1 (202) 780-1366 <br>
    ðŸ’¬ WhatsApp: +91 92664 18868
  </p>
</footer>

<a href="https://wa.me/919266418868" target="_blank"
style="
position:fixed;
bottom:20px;
right:20px;
width:56px;
height:56px;
background:#25D366;
color:#fff;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:28px;
box-shadow:0 10px 25px rgba(0,0,0,.25);
z-index:9999;
text-decoration:none;">ðŸ’¬</a>

</body>
</html>
