<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Supplier Registration | APD Global Trade</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:#f5f7fb;
}

.form{
  max-width:520px;
  margin:80px auto;
  background:#fff;
  padding:40px;
  border-radius:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.1);
}

h1{
  font-family:'Playfair Display',serif;
  text-align:center;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:14px;
  margin-bottom:14px;
  border-radius:10px;
  border:1px solid #e5e7eb;
}

button{
  width:100%;
  padding:14px;
  background:#0b1d36;
  color:#fff;
  border:none;
  border-radius:999px;
  font-weight:600;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="form">
  <h1>Supplier Registration</h1>

  <input id="company" placeholder="Company Name" required>
  <input id="email" type="email" placeholder="Email" required>
  <input id="password" type="password" placeholder="Password" required>

  <button id="submitBtn">Submit Application</button>
</div>

<script type="module">
  import { auth, db } from "/assets/js/firebase-init.js";
  import { createUserWithEmailAndPassword }
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { doc, setDoc, serverTimestamp }
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  document.getElementById("submitBtn").addEventListener("click", async () => {
    try {
      const company = document.getElementById("company").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;

      if (!company || !email || !password) {
        alert("Please fill all fields");
        return;
      }

      // 1Ô∏è‚É£ Create Auth user
      const userCredential = await createUserWithEmailAndPassword(
        auth,
        email,
        password
      );

      const user = userCredential.user;

      // 2Ô∏è‚É£ Create Firestore doc (THIS TRIGGERS EMAIL)
      await setDoc(doc(db, "suppliers", user.uid), {
        companyName: company,
        email: email,
        status: "pending",
        plan: "basic",
        createdAt: serverTimestamp()
      });

      alert("Application submitted. Approval pending.");
      window.location.href = "/supplier-login.html";

    } catch (e) {
      console.error(e);
      alert(e.message);
    }
  });
</script>

<!-- ‚úÖ GLOBAL FOOTER START -->
<footer style="
  background:#020617;
  color:#9ca3af;
  text-align:center;
  padding:50px 20px;
  font-size:14px;
">

  <p style="color:#c9a44a;font-weight:600;">
    APD Global Trade
  </p>

  <p>
    Elite B2B Trade Facilitation Platform
  </p>

  <p style="margin:14px 0;">
    <a href="/terms.html" style="color:#c9a44a;text-decoration:none;">Terms</a> |
    <a href="/privacy.html" style="color:#c9a44a;text-decoration:none;">Privacy</a> |
    <a href="/disclaimer.html" style="color:#c9a44a;text-decoration:none;">Disclaimer</a>
  </p>

  <p>
    üìß info@apdglobaltradehub.com <br>
    ‚òé +1 (202) 780-1366 <br>
    üí¨ WhatsApp: +91 92664 18868
  </p>

  <p style="margin-top:18px;">
    üåç India ¬∑ United States ¬∑ United Arab Emirates ¬∑ Global Partners
  </p>

  <p style="margin-top:18px;">
    <a href="https://www.facebook.com/share/1At1wN1REj/"
       target="_blank"
       style="color:#1877f2;text-decoration:none;font-weight:600;">
      Follow us on Facebook
    </a>
  </p>

</footer>

<!-- FLOATING WHATSAPP -->
<a href="https://wa.me/919266418868"
   target="_blank"
   style="
     position:fixed;
     bottom:20px;
     right:20px;
     width:56px;
     height:56px;
     background:#25D366;
     color:#fff;
     border-radius:50%;
     display:flex;
     align-items:center;
     justify-content:center;
     font-size:28px;
     box-shadow:0 10px 25px rgba(0,0,0,.25);
     z-index:9999;
     text-decoration:none;
   ">
  üí¨
</a>

</body>
</html>
