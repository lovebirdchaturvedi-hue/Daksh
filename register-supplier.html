<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Supplier Registration | APD Global Trade</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:#f5f7fb;
}

.form{
  max-width:520px;
  margin:80px auto;
  background:#fff;
  padding:40px;
  border-radius:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.1);
}

h1{
  font-family:'Playfair Display',serif;
  text-align:center;
  margin-bottom:20px;
}

input, textarea{
  width:100%;
  padding:14px;
  margin-bottom:14px;
  border-radius:10px;
  border:1px solid #e5e7eb;
  font-family:Inter,sans-serif;
}

textarea{
  resize:none;
  height:90px;
}

button{
  width:100%;
  padding:14px;
  background:#0b1d36;
  color:#fff;
  border:none;
  border-radius:999px;
  font-weight:600;
  cursor:pointer;
}

button:disabled{
  opacity:.6;
  cursor:not-allowed;
}
</style>
</head>

<body>

<div class="form">
  <h1>Supplier Registration</h1>

  <input id="company" placeholder="Company Name">
  <input id="contact" placeholder="Contact Number / WhatsApp">
  <input id="email" type="email" placeholder="Email">
  <textarea id="product" placeholder="Which Product do you supply?"></textarea>
  <input id="password" type="password" placeholder="Your Password">

  <button id="submitBtn">Submit Application</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword 
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { 
  getFirestore, 
  doc, 
  setDoc, 
  serverTimestamp 
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* üîê Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyABA-KRY6bY7K2QZwLhQ2piHjQVLLceiGs",
  authDomain: "apd-globaltrade-prod.firebaseapp.com",
  projectId: "apd-globaltrade-prod"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const submitBtn = document.getElementById("submitBtn");

submitBtn.addEventListener("click", async () => {
  try {
    const company = companyEl.value.trim();
    const contact = contactEl.value.trim();
    const email = emailEl.value.trim();
    const product = productEl.value.trim();
    const password = passwordEl.value;

    if (!company || !contact || !email || !product || !password) {
      alert("Please fill all fields");
      return;
    }

    submitBtn.disabled = true;
    submitBtn.innerText = "Submitting...";

    // 1Ô∏è‚É£ Create Auth user
    const cred = await createUserWithEmailAndPassword(auth, email, password);
    const user = cred.user;

    // 2Ô∏è‚É£ Firestore Supplier Record
    await setDoc(doc(db, "suppliers", user.uid), {
      companyName: company,
      contact: contact,
      email: email,
      product: product,
      status: "pending",
      plan: "basic",
      createdAt: serverTimestamp()
    });

    alert("Application submitted. Approval pending.");
    window.location.href = "/supplier-login.html";

  } catch (err) {
    console.error(err);
    alert(err.message);
    submitBtn.disabled = false;
    submitBtn.innerText = "Submit Application";
  }
});

// Element refs
const companyEl = document.getElementById("company");
const contactEl = document.getElementById("contact");
const emailEl = document.getElementById("email");
const productEl = document.getElementById("product");
const passwordEl = document.getElementById("password");
</script>

<!-- ================= FOOTER ================= -->
<footer style="
  background:#020617;
  color:#9ca3af;
  text-align:center;
  padding:40px 20px;
  font-size:14px;
">
  <p style="color:#c9a44a;font-weight:600;margin-bottom:6px;">
    APD Global Trade
  </p>
  <p>Elite B2B Trade Facilitation Platform</p>
  <p style="margin:10px 0;">
    <a href="/terms.html" style="color:#c9a44a;text-decoration:none;">Terms</a> |
    <a href="/privacy.html" style="color:#c9a44a;text-decoration:none;">Privacy</a> |
    <a href="/disclaimer.html" style="color:#c9a44a;text-decoration:none;">Disclaimer</a>
  </p>
  <p style="line-height:1.6;">
    üìß info@apdglobaltradehub.com<br>
    ‚òé +1 (202) 780-1366<br>
    üí¨ WhatsApp: +91 92664 18868
  </p>
</footer>

<!-- FLOATING WHATSAPP -->
<a href="https://wa.me/919266418868" target="_blank"
style="
position:fixed;
bottom:20px;
right:20px;
width:56px;
height:56px;
background:#25D366;
color:#fff;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:28px;
box-shadow:0 10px 25px rgba(0,0,0,.25);
z-index:9999;
text-decoration:none;">üí¨</a>

</body>
</html>
