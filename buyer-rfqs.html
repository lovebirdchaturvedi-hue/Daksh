<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, query, where } 
  from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp({
  apiKey:"AIzaSyABA-KRY6bY7K2QZwLhQ2piHjQVLLceiGs",
  authDomain:"apd-globaltrade-prod.firebaseapp.com",
  projectId:"apd-globaltrade-prod"
});

const db = getFirestore(app);
const rfqList = document.getElementById("rfqList");

async function loadRFQs(){
  rfqList.innerHTML = "<p>Loading RFQsâ€¦</p>";

  const q = query(
    collection(db,"rfqs"),
    where("status","==","live")
  );

  const snap = await getDocs(q);

  if(snap.empty){
    rfqList.innerHTML = "<p>No RFQs available</p>";
    return;
  }

  rfqList.innerHTML = "";

  snap.forEach(doc=>{
    const r = doc.data();
    rfqList.innerHTML += `
      <div class="card">
        <span class="badge">Verified Buyer</span>
        <h3>${r.product}</h3>
        <p><b>Quantity:</b> ${r.quantity}</p>
        <p><b>Country:</b> ${r.country}</p>
        <p class="lock">ðŸ”’ Contact details locked (Login as supplier)</p>
      </div>
    `;
  });
}

loadRFQs();
</script>
