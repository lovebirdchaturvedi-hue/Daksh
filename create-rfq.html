<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Submit RFQ | APD Global Trade</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body { margin:0; font-family:Inter,sans-serif; background:#f5f7fb; color:#0f172a; }
header { height:80px; background:#071427; display:flex; align-items:center; justify-content:center; }
header .logo { color:#c9a44a; font-weight:600; }
.section { max-width:700px; margin:auto; padding:80px 20px; }
form { background:#fff; padding:40px; border-radius:16px; border:1px solid #e5e7eb; }
input, textarea {
  width:100%; padding:12px; margin-bottom:16px;
  border-radius:8px; border:1px solid #cbd5e1;
}
button {
  background:#020617; color:#fff;
  padding:14px; border:none; border-radius:999px;
  width:100%; font-size:15px; font-weight:600;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <div class="logo">APD Global Trade</div>
</header>

<section class="section">
  <h1>Submit Your Buying Requirement</h1>
  <p>Your RFQ will be shared with verified suppliers.</p>

  <form id="rfqForm">

    <h3>Buyer Contact Details</h3>

    <input id="buyer_name" placeholder="Buyer Full Name" required>
    <input id="buyer_email" type="email" placeholder="Buyer Email" required>
    <input id="buyer_phone" placeholder="Buyer Phone / WhatsApp" required>
    <input id="buyer_company" placeholder="Company Name" required>
    <input id="buyer_country" placeholder="Country" required>

    <hr style="margin:30px 0;">

    <h3>Buying Requirement</h3>

    <input id="product" placeholder="Product Required" required>
    <input id="quantity" placeholder="Quantity (e.g. 50 MT)" required>
    <input id="destination" placeholder="Delivery Destination" required>
    <textarea id="requirements" placeholder="Specifications & details" required></textarea>

    <button type="submit">Submit RFQ</button>

  </form>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } 
  from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyABA-KRY6bY7K2QZwLhQ2piHjQVLLceiGs",
  authDomain: "apd-globaltrade-prod.firebaseapp.com",
  projectId: "apd-globaltrade-prod"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById("rfqForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  try {
    await addDoc(collection(db, "rfqs"), {
      buyerName: buyer_name.value,
      buyerEmail: buyer_email.value,
      phone: buyer_phone.value,          // üîë GOLD unlock
      company: buyer_company.value,
      country: buyer_country.value,
      product: product.value,
      quantity: quantity.value,
      destination: destination.value,
      requirements: requirements.value,
      status: "approved",                // LIVE immediately
      createdAt: serverTimestamp()
    });

    alert("‚úÖ RFQ submitted successfully!");
    e.target.reset();

  } catch (err) {
    console.error(err);
    alert("‚ùå Error submitting RFQ");
  }
});
</script>

</body>
</html>
