<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upgrade Membership | APD Global Trade</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#f5f7fb;
}
header{
  background:#071427;
  color:#c9a44a;
  padding:20px 40px;
  display:flex;
  justify-content:space-between;
}
.container{
  max-width:1000px;
  margin:60px auto;
}
.card{
  background:#fff;
  padding:30px;
  border-radius:16px;
  margin-bottom:30px;
}
.plans{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
}
.plan{
  border:1px solid #e5e7eb;
  border-radius:16px;
  padding:25px;
}
.plan h3{margin-top:0}
.price{font-size:26px;font-weight:700;margin:10px 0}
button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:999px;
  background:#0b1d36;
  color:#fff;
  font-weight:600;
  cursor:pointer;
}
.disabled{
  background:#9ca3af;
  cursor:not-allowed;
}
.note{color:#16a34a;font-weight:600}
</style>
</head>

<body>

<header>
  <div>APD Global Trade</div>
  <a href="/supplier-dashboard.html" style="color:#e5e7eb;text-decoration:none;">Dashboard</a>
</header>

<div class="container">

  <div class="card">
    <h2>Your Membership</h2>
    <p>Current Plan: <b id="currentPlan">Loadingâ€¦</b></p>
    <p>Status: <b id="status">Loadingâ€¦</b></p>
  </div>

  <div class="plans">

    <!-- FREE -->
    <div class="plan">
      <h3>Free</h3>
      <div class="price">$0</div>
      <ul>
        <li>View limited RFQs</li>
        <li>No buyer contact</li>
        <li>Basic visibility</li>
      </ul>
      <button class="disabled">Current / Downgrade via Admin</button>
    </div>

    <!-- GOLD -->
    <div class="plan">
      <h3>Gold</h3>
      <div class="price">$199 / year</div>
      <ul>
        <li>Unlimited RFQs</li>
        <li>Buyer phone & email</li>
        <li>Priority leads</li>
      </ul>
      <button onclick="requestUpgrade('gold')">Request Gold</button>
    </div>

    <!-- PLATINUM -->
    <div class="plan">
      <h3>Platinum</h3>
      <div class="price">$399 / year</div>
      <ul>
        <li>All Gold benefits</li>
        <li>Verified buyers only</li>
        <li>Dedicated support</li>
      </ul>
      <button onclick="requestUpgrade('platinum')">Request Platinum</button>
    </div>

  </div>

  <p id="msg" class="note"></p>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc, updateDoc, serverTimestamp }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp({
  apiKey:"AIzaSyABA-KRY6bY7K2QZwLhQ2piHjQVLLceiGs",
  authDomain:"apd-globaltrade-prod.firebaseapp.com",
  projectId:"apd-globaltrade-prod"
});

const auth=getAuth(app);
const db=getFirestore(app);

const currentPlan=document.getElementById("currentPlan");
const statusEl=document.getElementById("status");
const msg=document.getElementById("msg");

let uid=null;

onAuthStateChanged(auth,async user=>{
  if(!user) return location.href="/supplier-login.html";
  uid=user.uid;

  const snap=await getDoc(doc(db,"suppliers",uid));
  if(!snap.exists()) return alert("Supplier profile missing");

  const s=snap.data();
  currentPlan.innerText=s.plan;
  statusEl.innerText=s.status;
});

window.requestUpgrade = async(plan)=>{
  await updateDoc(doc(db,"suppliers",uid),{
    requestedPlan: plan,
    upgradeRequestedAt: serverTimestamp()
  });

  msg.innerText = "Upgrade request submitted. Admin will contact you.";
};
</script>

<!-- FOOTER -->
<footer style="background:#020617;color:#9ca3af;text-align:center;padding:40px 20px">
  <p style="color:#c9a44a;font-weight:600">APD Global Trade</p>
  <p>Elite B2B Trade Facilitation Platform</p>
  <p>
    <a href="/terms.html" style="color:#c9a44a">Terms</a> |
    <a href="/privacy.html" style="color:#c9a44a">Privacy</a> |
    <a href="/disclaimer.html" style="color:#c9a44a">Disclaimer</a>
  </p>
  <p>
    ðŸ“§ info@apdglobaltradehub.com<br>
    â˜Ž +1 (202) 780-1366<br>
    ðŸ’¬ WhatsApp: +91 92664 18868
  </p>
</footer>

<a href="https://wa.me/919266418868" target="_blank"
style="position:fixed;bottom:20px;right:20px;width:56px;height:56px;
background:#25D366;color:#fff;border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:28px;box-shadow:0 10px 25px rgba(0,0,0,.25);
z-index:9999;text-decoration:none">ðŸ’¬</a>

</body>
</html>
